import { ref } from "vue";

export type SupportedLanguage = "zh-CN" | "en" | "ja" | "ko" | "es" | "fr";

export const supportedLanguages: Array<{ value: SupportedLanguage; label: string }> = [
  { value: "zh-CN", label: "中文" },
  { value: "en", label: "English" },
  { value: "ja", label: "日本語" },
  { value: "ko", label: "한국어" },
  { value: "es", label: "Español" },
  { value: "fr", label: "Français" },
];

export const currentLanguage = ref<SupportedLanguage>("zh-CN");

export function setLanguage(lang: SupportedLanguage) {
  currentLanguage.value = lang;
  document.documentElement.lang = lang;
}

type Dict = Record<string, string>;
type Catalog = Record<SupportedLanguage, Dict>;

const zhCN: Dict = {
  "app.welcomeTitle": "欢迎使用 AI Hub",
  "app.welcomeSubtitle": "点击左侧图标选择 AI 助手",
  "top.newTab": "新建标签",
  "top.summarize": "总结",
  "top.summarizing": "总结中",
  "top.split": "分屏",
  "settings.title": "设置",
  "settings.done": "完成",
  "settings.cancel": "取消",
  "settings.tabs.appearance": "外观",
  "settings.tabs.layout": "布局",
  "settings.tabs.language": "语言",
  "settings.tabs.ai": "AI",
  "settings.tabs.advanced": "高级",
  "settings.language": "语言",
  "settings.languageHint": "界面语言将影响“总结”输出语言。",
  "settings.darkTheme": "深色主题",
  "settings.sidebarExpand": "侧边栏展开",
  "settings.sidebarWidth": "侧边栏宽度",
  "settings.summaryPromptTemplate": "总结提示词模板（全局）",
  "settings.summaryPromptHint": "可用变量：{language}、{text}",
  "settings.resetToDefault": "恢复默认",
  "settings.save": "保存",
  "settings.saveApiSettings": "保存 API 设置",
  "settings.savePromptTemplate": "保存模板",
  "settings.clearKey": "清空 Key",
  "settings.aiApiSaved": "AI API 设置已保存",
  "settings.apiKeyCleared": "已清空 API Key",
  "settings.clearApiKeyConfirm": "确认清空 API Key？清空后自动总结将不可用。",
  "settings.resetNavTitle": "重置导航栏",
  "settings.resetNavContent": "将清空：置顶、最近、排序。不会删除站点本身。",
  "settings.resetNavConfirm": "重置",
  "settings.resetNavButton": "重置导航栏",
  "settings.resetNavToast": "已重置",
  "settings.resetNavError": "重置导航栏失败",
  "siteSettings.title": "站点设置",
  "siteSettings.name": "站点名称",
  "siteSettings.url": "站点 URL",
  "siteSettings.icon": "图标",
  "siteSettings.summaryPromptOverride": "总结提示词模板（覆盖）",
  "siteSettings.useGlobalPrompt": "使用全局模板",
  "sidebar.searchPlaceholder": "搜索站点（名称/URL）",
  "sidebar.sectionPinned": "置顶",
  "sidebar.sectionRecent": "最近",
  "sidebar.menu.siteSettings": "站点设置…",
  "sidebar.menu.pin": "置顶",
  "sidebar.menu.unpin": "取消置顶",
  "sidebar.menu.refresh": "刷新页面",
  "sidebar.menu.clearCache": "清除缓存",
  "sidebar.menu.devtools": "开发者工具",
  "sidebar.menu.removeSite": "删除站点",
  "sidebar.addSite": "添加站点",
  "sidebar.settings": "设置",
  "sidebar.collapse": "收起",
  "sidebar.expand": "展开",
  "sidebar.light": "浅色",
  "sidebar.dark": "深色",
  "sidebar.switchToLight": "切换到浅色主题",
  "sidebar.switchToDark": "切换到深色主题",
  "addSite.title": "添加自定义站点",
  "addSite.add": "添加",
  "top.multiSession": "多会话",
  "top.closeTab": "关闭标签",
  "top.splitNeedTwoTabs": "请先创建第二个标签页（新建标签），再开启分屏。",
  "summary.title": "总结",
  "summary.placeholder": "总结结果会出现在这里",
  "summary.copyPrefix": "上下文（可迁移）：",
  "summary.nextQuestion": "接下来我想问：<在此写问题>",
  "summary.copySuccess": "已复制到剪贴板",
  "summary.copyFail": "复制失败（可能缺少剪贴板权限）",
  "common.close": "关闭",
  "common.copyToClipboard": "复制到剪贴板",
  "common.loadConfigFailed": "加载配置失败",
  "common.siteNotFound": "站点不存在",
  "common.fillNameUrl": "请填写站点名称和 URL",
  "common.refreshFailed": "刷新失败",
  "common.clearCacheFailed": "清除缓存失败",
};

const en: Dict = {
  "app.welcomeTitle": "Welcome to AI Hub",
  "app.welcomeSubtitle": "Select an AI assistant from the left sidebar",
  "top.newTab": "New Tab",
  "top.summarize": "Summarize",
  "top.summarizing": "Summarizing",
  "top.split": "Split",
  "settings.title": "Settings",
  "settings.done": "Done",
  "settings.cancel": "Cancel",
  "settings.tabs.appearance": "Appearance",
  "settings.tabs.layout": "Layout",
  "settings.tabs.language": "Language",
  "settings.tabs.ai": "AI",
  "settings.tabs.advanced": "Advanced",
  "settings.language": "Language",
  "settings.languageHint": "UI language also controls the summary output language.",
  "settings.darkTheme": "Dark theme",
  "settings.sidebarExpand": "Sidebar expanded",
  "settings.sidebarWidth": "Sidebar width",
  "settings.summaryPromptTemplate": "Summary prompt template (global)",
  "settings.summaryPromptHint": "Variables: {language}, {text}",
  "settings.resetToDefault": "Reset to default",
  "settings.save": "Save",
  "settings.saveApiSettings": "Save API settings",
  "settings.savePromptTemplate": "Save template",
  "settings.clearKey": "Clear key",
  "settings.aiApiSaved": "AI API settings saved",
  "settings.apiKeyCleared": "API key cleared",
  "settings.clearApiKeyConfirm": "Clear API key? Auto-summarize will be unavailable.",
  "settings.resetNavTitle": "Reset sidebar",
  "settings.resetNavContent": "This will clear pinned, recent and ordering. Sites will not be deleted.",
  "settings.resetNavConfirm": "Reset",
  "settings.resetNavButton": "Reset sidebar",
  "settings.resetNavToast": "Reset done",
  "settings.resetNavError": "Reset failed",
  "siteSettings.title": "Site Settings",
  "siteSettings.name": "Name",
  "siteSettings.url": "URL",
  "siteSettings.icon": "Icon",
  "siteSettings.summaryPromptOverride": "Summary prompt template (override)",
  "siteSettings.useGlobalPrompt": "Use global template",
  "sidebar.searchPlaceholder": "Search sites (name/URL)",
  "sidebar.sectionPinned": "Pinned",
  "sidebar.sectionRecent": "Recent",
  "sidebar.menu.siteSettings": "Site settings…",
  "sidebar.menu.pin": "Pin",
  "sidebar.menu.unpin": "Unpin",
  "sidebar.menu.refresh": "Reload",
  "sidebar.menu.clearCache": "Clear cache",
  "sidebar.menu.devtools": "DevTools",
  "sidebar.menu.removeSite": "Remove site",
  "sidebar.addSite": "Add site",
  "sidebar.settings": "Settings",
  "sidebar.collapse": "Collapse",
  "sidebar.expand": "Expand",
  "sidebar.light": "Light",
  "sidebar.dark": "Dark",
  "sidebar.switchToLight": "Switch to light theme",
  "sidebar.switchToDark": "Switch to dark theme",
  "addSite.title": "Add custom site",
  "addSite.add": "Add",
  "top.multiSession": "Multi-session",
  "top.closeTab": "Close tab",
  "top.splitNeedTwoTabs": "Create another tab first (New Tab), then enable split view.",
  "summary.title": "Summary",
  "summary.placeholder": "The summary will appear here",
  "summary.copyPrefix": "Portable context:",
  "summary.nextQuestion": "Next question: <type your question here>",
  "summary.copySuccess": "Copied to clipboard",
  "summary.copyFail": "Copy failed (clipboard permission may be missing)",
  "common.close": "Close",
  "common.copyToClipboard": "Copy to clipboard",
  "common.loadConfigFailed": "Failed to load config",
  "common.siteNotFound": "Site not found",
  "common.fillNameUrl": "Please fill in name and URL",
  "common.refreshFailed": "Refresh failed",
  "common.clearCacheFailed": "Failed to clear cache",
};

const ja: Dict = {
  "app.welcomeTitle": "AI Hubへようこそ",
  "app.welcomeSubtitle": "左のサイドバーからAIを選択してください",
  "top.newTab": "新しいタブ",
  "top.summarize": "要約",
  "top.summarizing": "要約中",
  "top.split": "分割",
  "settings.title": "設定",
  "settings.done": "完了",
  "settings.cancel": "キャンセル",
  "settings.tabs.appearance": "外観",
  "settings.tabs.layout": "レイアウト",
  "settings.tabs.language": "言語",
  "settings.tabs.ai": "AI",
  "settings.tabs.advanced": "詳細",
  "settings.language": "言語",
  "settings.languageHint": "UI 言語は要約の出力言語にも影響します。",
  "settings.darkTheme": "ダークテーマ",
  "settings.sidebarExpand": "サイドバー展開",
  "settings.sidebarWidth": "サイドバー幅",
  "settings.summaryPromptTemplate": "要約プロンプト（全体）",
  "settings.summaryPromptHint": "変数: {language}, {text}",
  "settings.resetToDefault": "既定に戻す",
  "settings.save": "保存",
  "settings.saveApiSettings": "AI API 設定を保存",
  "settings.savePromptTemplate": "テンプレートを保存",
  "settings.clearKey": "キーを消去",
  "settings.aiApiSaved": "AI API 設定を保存しました",
  "settings.apiKeyCleared": "API キーを消去しました",
  "settings.clearApiKeyConfirm": "API キーを消去しますか？自動要約が使えなくなります。",
  "settings.resetNavTitle": "サイドバーをリセット",
  "settings.resetNavContent": "ピン留め/最近/並び順をクリアします。サイト自体は削除されません。",
  "settings.resetNavConfirm": "リセット",
  "settings.resetNavButton": "サイドバーをリセット",
  "settings.resetNavToast": "リセットしました",
  "settings.resetNavError": "リセットに失敗しました",
  "siteSettings.title": "サイト設定",
  "siteSettings.name": "名前",
  "siteSettings.url": "URL",
  "siteSettings.icon": "アイコン",
  "siteSettings.summaryPromptOverride": "要約プロンプト（上書き）",
  "siteSettings.useGlobalPrompt": "全体テンプレートを使用",
  "sidebar.searchPlaceholder": "サイト検索（名前/URL）",
  "sidebar.sectionPinned": "ピン留め",
  "sidebar.sectionRecent": "最近",
  "sidebar.menu.siteSettings": "サイト設定…",
  "sidebar.menu.pin": "ピン留め",
  "sidebar.menu.unpin": "ピン解除",
  "sidebar.menu.refresh": "再読み込み",
  "sidebar.menu.clearCache": "キャッシュを消去",
  "sidebar.menu.devtools": "開発者ツール",
  "sidebar.menu.removeSite": "サイトを削除",
  "sidebar.addSite": "サイト追加",
  "sidebar.settings": "設定",
  "sidebar.collapse": "折りたたむ",
  "sidebar.expand": "展開",
  "sidebar.light": "ライト",
  "sidebar.dark": "ダーク",
  "sidebar.switchToLight": "ライトテーマへ切替",
  "sidebar.switchToDark": "ダークテーマへ切替",
  "addSite.title": "カスタムサイトを追加",
  "addSite.add": "追加",
  "top.multiSession": "複数セッション",
  "top.closeTab": "タブを閉じる",
  "top.splitNeedTwoTabs": "分割を使うには別のタブ（新しいタブ）を作成してください。",
  "summary.title": "要約",
  "summary.placeholder": "要約結果はここに表示されます",
  "summary.copyPrefix": "持ち運べるコンテキスト：",
  "summary.nextQuestion": "次に聞きたいこと：<ここに入力>",
  "summary.copySuccess": "クリップボードにコピーしました",
  "summary.copyFail": "コピーに失敗しました（権限不足の可能性）",
  "common.close": "閉じる",
  "common.copyToClipboard": "クリップボードにコピー",
  "common.loadConfigFailed": "設定の読み込みに失敗しました",
  "common.siteNotFound": "サイトが見つかりません",
  "common.fillNameUrl": "名前とURLを入力してください",
  "common.refreshFailed": "更新に失敗しました",
  "common.clearCacheFailed": "キャッシュ削除に失敗しました",
};

const ko: Dict = {
  "app.welcomeTitle": "AI Hub에 오신 것을 환영합니다",
  "app.welcomeSubtitle": "왼쪽 사이드바에서 AI를 선택하세요",
  "top.newTab": "새 탭",
  "top.summarize": "요약",
  "top.summarizing": "요약 중",
  "top.split": "분할",
  "settings.title": "설정",
  "settings.done": "완료",
  "settings.cancel": "취소",
  "settings.tabs.appearance": "외관",
  "settings.tabs.layout": "레이아웃",
  "settings.tabs.language": "언어",
  "settings.tabs.ai": "AI",
  "settings.tabs.advanced": "고급",
  "settings.language": "언어",
  "settings.languageHint": "UI 언어는 요약 출력 언어에도 영향을 줍니다.",
  "settings.darkTheme": "다크 테마",
  "settings.sidebarExpand": "사이드바 펼침",
  "settings.sidebarWidth": "사이드바 너비",
  "settings.summaryPromptTemplate": "요약 프롬프트(전역)",
  "settings.summaryPromptHint": "변수: {language}, {text}",
  "settings.resetToDefault": "기본값으로 재설정",
  "settings.save": "저장",
  "settings.saveApiSettings": "AI API 설정 저장",
  "settings.savePromptTemplate": "템플릿 저장",
  "settings.clearKey": "키 지우기",
  "settings.aiApiSaved": "AI API 설정이 저장되었습니다",
  "settings.apiKeyCleared": "API 키가 지워졌습니다",
  "settings.clearApiKeyConfirm": "API 키를 지울까요? 자동 요약을 사용할 수 없게 됩니다.",
  "settings.resetNavTitle": "사이드바 초기화",
  "settings.resetNavContent": "고정/최근/정렬을 초기화합니다. 사이트는 삭제되지 않습니다.",
  "settings.resetNavConfirm": "초기화",
  "settings.resetNavButton": "사이드바 초기화",
  "settings.resetNavToast": "초기화 완료",
  "settings.resetNavError": "초기화 실패",
  "siteSettings.title": "사이트 설정",
  "siteSettings.name": "이름",
  "siteSettings.url": "URL",
  "siteSettings.icon": "아이콘",
  "siteSettings.summaryPromptOverride": "요약 프롬프트(재정의)",
  "siteSettings.useGlobalPrompt": "전역 템플릿 사용",
  "sidebar.searchPlaceholder": "사이트 검색(이름/URL)",
  "sidebar.sectionPinned": "고정",
  "sidebar.sectionRecent": "최근",
  "sidebar.menu.siteSettings": "사이트 설정…",
  "sidebar.menu.pin": "고정",
  "sidebar.menu.unpin": "고정 해제",
  "sidebar.menu.refresh": "새로고침",
  "sidebar.menu.clearCache": "캐시 삭제",
  "sidebar.menu.devtools": "개발자 도구",
  "sidebar.menu.removeSite": "사이트 삭제",
  "sidebar.addSite": "사이트 추가",
  "sidebar.settings": "설정",
  "sidebar.collapse": "접기",
  "sidebar.expand": "펼치기",
  "sidebar.light": "라이트",
  "sidebar.dark": "다크",
  "sidebar.switchToLight": "라이트 테마로 전환",
  "sidebar.switchToDark": "다크 테마로 전환",
  "addSite.title": "사용자 사이트 추가",
  "addSite.add": "추가",
  "top.multiSession": "다중 세션",
  "top.closeTab": "탭 닫기",
  "top.splitNeedTwoTabs": "분할을 켜려면 먼저 다른 탭(새 탭)을 만드세요.",
  "summary.title": "요약",
  "summary.placeholder": "요약 결과가 여기에 표시됩니다",
  "summary.copyPrefix": "이동 가능한 컨텍스트:",
  "summary.nextQuestion": "다음 질문: <여기에 입력>",
  "summary.copySuccess": "클립보드에 복사됨",
  "summary.copyFail": "복사 실패(권한이 없을 수 있음)",
  "common.close": "닫기",
  "common.copyToClipboard": "클립보드에 복사",
  "common.loadConfigFailed": "설정을 불러오지 못했습니다",
  "common.siteNotFound": "사이트를 찾을 수 없습니다",
  "common.fillNameUrl": "이름과 URL을 입력하세요",
  "common.refreshFailed": "새로고침 실패",
  "common.clearCacheFailed": "캐시 삭제 실패",
};

const es: Dict = {
  "app.welcomeTitle": "Bienvenido a AI Hub",
  "app.welcomeSubtitle": "Selecciona un asistente de IA desde la barra izquierda",
  "top.newTab": "Nueva pestaña",
  "top.summarize": "Resumir",
  "top.summarizing": "Resumiendo",
  "top.split": "Dividir",
  "settings.title": "Configuración",
  "settings.done": "Listo",
  "settings.cancel": "Cancelar",
  "settings.tabs.appearance": "Apariencia",
  "settings.tabs.layout": "Diseño",
  "settings.tabs.language": "Idioma",
  "settings.tabs.ai": "IA",
  "settings.tabs.advanced": "Avanzado",
  "settings.language": "Idioma",
  "settings.languageHint": "El idioma de la interfaz también controla el idioma del resumen.",
  "settings.darkTheme": "Tema oscuro",
  "settings.sidebarExpand": "Barra lateral expandida",
  "settings.sidebarWidth": "Ancho de la barra lateral",
  "settings.summaryPromptTemplate": "Plantilla de prompt (global)",
  "settings.summaryPromptHint": "Variables: {language}, {text}",
  "settings.resetToDefault": "Restablecer",
  "settings.save": "Guardar",
  "settings.saveApiSettings": "Guardar configuración de AI API",
  "settings.savePromptTemplate": "Guardar plantilla",
  "settings.clearKey": "Borrar clave",
  "settings.aiApiSaved": "Configuración de AI API guardada",
  "settings.apiKeyCleared": "Clave API borrada",
  "settings.clearApiKeyConfirm": "¿Borrar la clave API? El resumen automático no estará disponible.",
  "settings.resetNavTitle": "Restablecer barra lateral",
  "settings.resetNavContent": "Se borrarán fijados, recientes y orden. No se eliminarán los sitios.",
  "settings.resetNavConfirm": "Restablecer",
  "settings.resetNavButton": "Restablecer barra lateral",
  "settings.resetNavToast": "Restablecido",
  "settings.resetNavError": "Error al restablecer",
  "siteSettings.title": "Configuración del sitio",
  "siteSettings.name": "Nombre",
  "siteSettings.url": "URL",
  "siteSettings.icon": "Icono",
  "siteSettings.summaryPromptOverride": "Plantilla de prompt (anulación)",
  "siteSettings.useGlobalPrompt": "Usar plantilla global",
  "sidebar.searchPlaceholder": "Buscar sitios (nombre/URL)",
  "sidebar.sectionPinned": "Fijados",
  "sidebar.sectionRecent": "Recientes",
  "sidebar.menu.siteSettings": "Configuración del sitio…",
  "sidebar.menu.pin": "Fijar",
  "sidebar.menu.unpin": "Desfijar",
  "sidebar.menu.refresh": "Recargar",
  "sidebar.menu.clearCache": "Borrar caché",
  "sidebar.menu.devtools": "DevTools",
  "sidebar.menu.removeSite": "Eliminar sitio",
  "sidebar.addSite": "Añadir sitio",
  "sidebar.settings": "Configuración",
  "sidebar.collapse": "Contraer",
  "sidebar.expand": "Expandir",
  "sidebar.light": "Claro",
  "sidebar.dark": "Oscuro",
  "sidebar.switchToLight": "Cambiar a tema claro",
  "sidebar.switchToDark": "Cambiar a tema oscuro",
  "addSite.title": "Añadir sitio personalizado",
  "addSite.add": "Añadir",
  "top.multiSession": "Multi-sesión",
  "top.closeTab": "Cerrar pestaña",
  "top.splitNeedTwoTabs": "Crea otra pestaña primero (Nueva pestaña) y luego activa la vista dividida.",
  "summary.title": "Resumen",
  "summary.placeholder": "El resumen aparecerá aquí",
  "summary.copyPrefix": "Contexto portable:",
  "summary.nextQuestion": "Siguiente pregunta: <escribe aquí>",
  "summary.copySuccess": "Copiado al portapapeles",
  "summary.copyFail": "Error al copiar (puede faltar permiso del portapapeles)",
  "common.close": "Cerrar",
  "common.copyToClipboard": "Copiar al portapapeles",
  "common.loadConfigFailed": "No se pudo cargar la configuración",
  "common.siteNotFound": "Sitio no encontrado",
  "common.fillNameUrl": "Rellena el nombre y la URL",
  "common.refreshFailed": "Error al recargar",
  "common.clearCacheFailed": "Error al borrar caché",
};

const fr: Dict = {
  "app.welcomeTitle": "Bienvenue dans AI Hub",
  "app.welcomeSubtitle": "Choisissez un assistant IA dans la barre latérale",
  "top.newTab": "Nouvel onglet",
  "top.summarize": "Résumer",
  "top.summarizing": "Résumé…",
  "top.split": "Scinder",
  "settings.title": "Paramètres",
  "settings.done": "Terminé",
  "settings.cancel": "Annuler",
  "settings.tabs.appearance": "Apparence",
  "settings.tabs.layout": "Disposition",
  "settings.tabs.language": "Langue",
  "settings.tabs.ai": "IA",
  "settings.tabs.advanced": "Avancé",
  "settings.language": "Langue",
  "settings.languageHint": "La langue de l’interface contrôle aussi la langue du résumé.",
  "settings.darkTheme": "Thème sombre",
  "settings.sidebarExpand": "Barre latérale étendue",
  "settings.sidebarWidth": "Largeur de la barre latérale",
  "settings.summaryPromptTemplate": "Modèle de prompt (global)",
  "settings.summaryPromptHint": "Variables : {language}, {text}",
  "settings.resetToDefault": "Réinitialiser",
  "settings.save": "Enregistrer",
  "settings.saveApiSettings": "Enregistrer AI API",
  "settings.savePromptTemplate": "Enregistrer le modèle",
  "settings.clearKey": "Effacer la clé",
  "settings.aiApiSaved": "Paramètres AI API enregistrés",
  "settings.apiKeyCleared": "Clé API effacée",
  "settings.clearApiKeyConfirm": "Effacer la clé API ? Le résumé automatique sera indisponible.",
  "settings.resetNavTitle": "Réinitialiser la barre latérale",
  "settings.resetNavContent": "Cela effacera épinglés/récents/ordre. Les sites ne seront pas supprimés.",
  "settings.resetNavConfirm": "Réinitialiser",
  "settings.resetNavButton": "Réinitialiser la barre latérale",
  "settings.resetNavToast": "Réinitialisé",
  "settings.resetNavError": "Échec de la réinitialisation",
  "siteSettings.title": "Paramètres du site",
  "siteSettings.name": "Nom",
  "siteSettings.url": "URL",
  "siteSettings.icon": "Icône",
  "siteSettings.summaryPromptOverride": "Modèle de prompt (remplacement)",
  "siteSettings.useGlobalPrompt": "Utiliser le modèle global",
  "sidebar.searchPlaceholder": "Rechercher des sites (nom/URL)",
  "sidebar.sectionPinned": "Épinglés",
  "sidebar.sectionRecent": "Récents",
  "sidebar.menu.siteSettings": "Paramètres du site…",
  "sidebar.menu.pin": "Épingler",
  "sidebar.menu.unpin": "Désépingler",
  "sidebar.menu.refresh": "Recharger",
  "sidebar.menu.clearCache": "Vider le cache",
  "sidebar.menu.devtools": "DevTools",
  "sidebar.menu.removeSite": "Supprimer le site",
  "sidebar.addSite": "Ajouter un site",
  "sidebar.settings": "Paramètres",
  "sidebar.collapse": "Réduire",
  "sidebar.expand": "Développer",
  "sidebar.light": "Clair",
  "sidebar.dark": "Sombre",
  "sidebar.switchToLight": "Passer au thème clair",
  "sidebar.switchToDark": "Passer au thème sombre",
  "addSite.title": "Ajouter un site personnalisé",
  "addSite.add": "Ajouter",
  "top.multiSession": "Multi-session",
  "top.closeTab": "Fermer l’onglet",
  "top.splitNeedTwoTabs": "Créez d’abord un autre onglet (Nouvel onglet), puis activez la vue scindée.",
  "summary.title": "Résumé",
  "summary.placeholder": "Le résumé apparaîtra ici",
  "summary.copyPrefix": "Contexte portable :",
  "summary.nextQuestion": "Question suivante : <saisissez ici>",
  "summary.copySuccess": "Copié dans le presse-papiers",
  "summary.copyFail": "Échec de la copie (permission presse-papiers manquante)",
  "common.close": "Fermer",
  "common.copyToClipboard": "Copier dans le presse-papiers",
  "common.loadConfigFailed": "Échec du chargement de la configuration",
  "common.siteNotFound": "Site introuvable",
  "common.fillNameUrl": "Veuillez renseigner le nom et l’URL",
  "common.refreshFailed": "Échec du rechargement",
  "common.clearCacheFailed": "Échec du vidage du cache",
};

const catalog: Catalog = {
  "zh-CN": zhCN,
  en,
  ja,
  ko,
  es,
  fr,
};

export function t(key: string, params?: Record<string, string | number>): string {
  const dict = catalog[currentLanguage.value] ?? catalog["zh-CN"];
  const fallback = catalog["zh-CN"];
  let text = dict[key] ?? fallback[key] ?? key;
  if (params) {
    for (const [k, v] of Object.entries(params)) {
      text = text.replace(`{${k}}`, String(v));
    }
  }
  return text;
}
